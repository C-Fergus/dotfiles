# C-Fergus' tmux.conf {{{
# vim: set foldmethod=marker foldlevel=0 :
# }}}

# General Configuration {{{
# """""""""""""""""""""""""

## Aggressive window resizing
# constrain window size to size of smallest client connected to each window
# of a session, not for the session as a whole. i.e. ignore the viewer if they
# are viewing a different window in the session
setw -g aggressive-resize on

## Faster command sequences
# do not wait for escape sequences after prefix key
set -s escape-time 10

## Index panes and windows from 1 instead of 0
set -g base-index 1
set -g pane-base-index 1

## Remove window on process exit
# set -g remain-on-exit off

## Renumber windows
# after closign a window, automatically renumber remaining windows so they count from 1
set -g renumber-windows on

## Vi mode
set -g status-keys vi
setw -g mode-keys vi


# }}}
# Status Bar {{{
# """"""""""""""

## Toggle show on prefix
# doesn't work, can send the keys to enable statusbar on prefix,
# but how do you check when `client_prefix` returns to 0?
set -g status on
#set-hook -g pane-focus-in "set -g status #{?client_prefix,on,off}"
set -g status-interval 10
#{?client_prefix,on,off}

## Clock
set -g clock-mode-colour yellow

## Content
set -g status-left ' [#S] '
set -g status-left-length 20
set -g status-right '%d-%b-%y %H:%M:%S '

## Position
set -g status-position top



# ## George hotts
# set -g status-position bottom
# set -g status-style bg=colour234,fg=colour137,dim
# #set -g status-left ''
# set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '
# # set -g status-right 'Continuum status: #{continuum_status} #[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '
# set -g status-right-length 50
# set -g status-left-length 20
# 
# setw -g window-status-current-style fg=colour81,bg=colour238,bold
# setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '
# 
# setw -g window-status-style fg=colour138,bg=colour235,none
# setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '
# 
# setw -g window-status-bell-style fg=colour255,bg=colour1,bold


# }}}
# Bindings & Remaps {{{
# """""""""""""""""""""

## High window numbers
# select high window numbers with F keys

bind 0   selectw -t:10
bind F1  selectw -t:11
bind F2  selectw -t:12
bind F3  selectw -t:13
bind F4  selectw -t:14
bind F5  selectw -t:15
bind F6  selectw -t:16
bind F7  selectw -t:17
bind F8  selectw -t:18
bind F9  selectw -t:19
bind F10 selectw -t:20
bind F11 selectw -t:21
bind F12 selectw -t:22


## Monitor activity
bind m set monitor-activity


## Pane splits more intuitive
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"


## Prefix
unbind C-b                  # unbind old prefix
set -g prefix2 `            # second prefix for quicker window switching
bind ` send-prefix -2       # send prefix to nested tmux session on double press
set -g prefix C-Space       # new prefix
bind Space send-prefix      # send prefix to nested tmux session on double press
#bind C-Space set status on \; run -b "~./config/tmux/plugins/autohide-status/checkvariables" \; switchc -Tprefix
#bind ` set status on \; run -b "~./config/tmux/plugins/autohide-status/checkvariables" \; switchc -Tprefix
bind C-Space last-window    # last window on double press (<C-Space-Space>)

#set -g status on

## Re-source tmux.conf with prefix+r
unbind r
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded tmux.conf"


# }}}
# Plugins {{{
# """""""""""

# -----------------------------------------------------------------------------
# Plugin Manager - https://github.com/tmux-plugins/tpm
# In order to use the plugins below you need to install TPM and the plugins.
#   Step 1) git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
#   Step 2) Reload tmux if it's already started with `r
#   Step 3) Launch tmux and hit `I (capital i) to fetch any plugins
# -----------------------------------------------------------------------------

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
"set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'christoomey/vim-tmux-navigator'

# Initialise TPM (keep this line at the very bottom of your tmux.conf)
run '~/.config/tmux/plugins/tpm/tpm'

